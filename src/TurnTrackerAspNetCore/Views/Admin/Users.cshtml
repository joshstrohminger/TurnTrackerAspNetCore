@model List<User>
@{ ViewBag.Title = "Users";}

<table class="table table-striped table-condensed">
    <thead>
    <tr>
        <th>UserName</th>
        <th>Display Name</th>
        <th>Roles</th>
        <th>Id</th>
        <th></th>
    </tr>
    </thead>
    @foreach (var user in Model)
    {
        <tr>
            <td>@user.UserName</td>
            <td>@user.DisplayName</td>
            <td>@string.Join(", ", user.Roles.Select(role => ViewBag.Roles[role.RoleId]))</td>
            <td>@user.Id</td>
            <td>
                @if (ViewBag.MyUserId != user.Id)
                {
                    <a asp-action="EditUser" asp-route-id="@user.Id" class="btn btn-xs btn-success pull-left">
                        <span class="glyphicon glyphicon-pencil"></span>
                    </a>
                    <form asp-action="DeleteUser" asp-antiforgery="true" asp-route-id="@user.Id">
                        <button class="btn btn-xs btn-danger" type="submit">
                            <span class="glyphicon glyphicon-remove"></span>
                        </button>
                    </form>
                }
            </td>
        </tr>
    }
</table>